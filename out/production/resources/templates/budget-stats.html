<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Budget Plan View</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js"></script>
    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>
    <!-- GOOGLE Charts -->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>

    <!-- Cool icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.0.10/css/all.css" integrity="sha384-+d0P83n9kaQMCwj8F4RJB66tzIwOKmrdb46+porD/OvrJ+37WqIM7UoBtwHO6Nlg" crossorigin="anonymous">

    <meta name="viewport" content="width=device-width, initial-scale=1">
</head>
<body>
    <div th:replace="fragments/navigation :: navigation">
        Static navigation!!!
    </div>

    <div class="container">
        <div class="jumbotron jumbotron-fluid">
            <H1>Budget Stats</H1>
        </div>

        <!--CHART-->
        <div id="chart_div" style="width: 400px; height: 120px;"></div>
    </div>


    <!-- SCRIPTS TO BE EXECUTED TO MAP VALUES FROM MAIN "BUDGET PLAN" INTO "EDIT MODAL" -->
    <script>
        google.charts.load('current', {'packages':['gauge']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {

            var dataArray = [
                ['Label', 'Value'],
                ['Test', 0]
            ];

            $.ajax({
                type : "GET",
                url: "/budget-stats-get",
                dataType: "json",
                async: false,
                success: function(data){
                    $.each(data, function(n, elem) {
                        dataArray.push([data[n][0], data[n][1]]);
                    });
                },
                error: function (data) {
                    console.log('fucking error: ' + data)
                }
            });

            var data = google.visualization.arrayToDataTable(dataArray);

            var options = {
                width: 400, height: 600,
                redFrom: 90, redTo: 100,
                yellowFrom:75, yellowTo: 90,
                greenFrom:60, greenTo: 75,
                minorTicks: 5
            };

            var chart = new google.visualization.Gauge(document.getElementById('chart_div'));

            chart.draw(data, options);
        }
    </script>

</body>
</html>